{
    "title": "Umfragen",
    "description": "Generisches Umfrage-Framework mit erweiterten Fragetypen, Skip-Logic und Ergebnis-Dashboard.",
    "content": "# DGPTM Umfragen\n\n## Übersicht\n\nGenerisches Umfrage-Framework für strukturierte Befragungen. Unterstützt 8 Fragetypen, Skip-Logic, Duplikatschutz, Datei-Uploads, Ergebnis-Dashboard und CSV-Export. Die erste mitgelieferte Umfrage ist die ECLS-Zentren-Erhebung (15 Fragen zu ECMO/ECLS-Programmen).\n\n## Hauptfunktionen\n\n- 8 Fragetypen: Text, Textarea, Zahl, Radio, Checkbox, Select, Matrix, Datei-Upload\n- Skip-Logic (bedingte Verzweigung)\n- Duplikatschutz (Cookie + IP-Adresse)\n- Fortschrittsbalken mit Abschnitts-Navigation\n- Zwischenspeichern und Fortsetzen\n- Ergebnis-Dashboard mit Balkendiagrammen, Heatmaps und Statistiken\n- CSV-Export aller Antworten\n- Öffentlicher Ergebnis-Link (Token-basiert)\n- ECLS-Zentren Musterumfrage (15 Fragen, vorkonfiguriert)\n\n## Shortcodes\n\n### [dgptm_umfrage]\nBindet eine Umfrage auf einer WordPress-Seite ein.\n\n**Parameter:**\n- `id` - Umfrage-ID (Zahl)\n- `slug` - Umfrage-Slug (Text)\n\n**Beispiele:**\n```\n[dgptm_umfrage id=\"1\"]\n[dgptm_umfrage slug=\"ecls-zentren\"]\n```\n\n## Admin-Interface\n\n**Menü:** DGPTM Suite → Umfragen\n\n### Umfrage-Liste\n\nÜbersicht aller Umfragen mit Status, Antwort-Anzahl, Shortcode und Aktionen:\n- **Bearbeiten** - Umfrage-Einstellungen und Fragen\n- **Ergebnisse** - Auswertungs-Dashboard\n- **Duplizieren** - Kopie der Umfrage erstellen\n- **Ergebnis-Link** - Öffentlichen Link kopieren\n- **Archivieren** - Umfrage ausblenden\n\n### Umfrage erstellen/bearbeiten\n\n**Einstellungen:**\n- Titel und Slug\n- Beschreibung\n- Status: Entwurf / Aktiv / Geschlossen\n- Zugang: Öffentlich / Nur mit Token / Nur eingeloggt\n- Duplikatschutz: Cookie+IP / Nur Cookie / Nur IP / Kein Schutz\n- Fortschrittsbalken ein/aus\n- Zwischenspeichern ein/aus\n\n**Fragen-Builder:**\n- Fragen per Drag & Drop sortieren\n- Fragetyp wählen, Fragetext eingeben\n- Antwortoptionen für Radio/Checkbox/Select hinzufügen\n- Matrix: Zeilen und Spalten definieren\n- Validierung: Pflichtfeld, Min/Max (Zahlen), Pattern (E-Mail/URL/Telefon)\n- Skip-Logic: \"Wenn Antwort = X → Springe zu Frage Y\"\n- Abschnitts-Label für Gruppierung\n\n### Ergebnis-Dashboard\n\n**Übersicht:**\n- Anzahl abgeschlossene Antworten\n- Anzahl in Bearbeitung\n- Abschlussrate in Prozent\n- Zeitraum\n\n**Pro Frage:**\n- Radio/Checkbox/Select → Balkendiagramm mit Prozentwerten\n- Zahl → Min, Max, Durchschnitt, Median, Summe\n- Matrix → Heatmap-Tabelle (farbkodiert)\n- Text/Textarea → scrollbare Liste der Freitext-Antworten\n- Datei → Anzahl hochgeladener Dateien\n\n**Einzelantworten:**\n- Tabelle mit Name, E-Mail, Datum, IP\n- Detail-Ansicht jeder Antwort\n- Einzelne Antworten löschen\n\n### CSV-Export\n\n- Button im Ergebnis-Dashboard\n- Eine Zeile pro Antwort, eine Spalte pro Frage\n- Matrix-Fragen werden in einzelne Spalten aufgeteilt (Zeile × Spalte)\n- Checkbox-Antworten mit Semikolon getrennt\n- UTF-8 mit BOM für Excel-Kompatibilität\n- Semikolon als Trennzeichen\n\n## Fragetypen im Detail\n\n### Text (einzeilig)\nEinfaches Textfeld. Optional mit Validierung: E-Mail, URL, Telefon.\n\n### Textarea (mehrzeilig)\nMehrzeiliges Textfeld für längere Antworten.\n\n### Zahl\nNumerisches Feld mit optionalem Min/Max.\n\n### Radio (Einfachauswahl)\nEine Antwort aus mehreren Optionen. Ideal für Ja/Nein-Fragen.\n\n### Checkbox (Mehrfachauswahl)\nMehrere Antworten aus einer Liste wählbar.\n\n### Select (Dropdown)\nDropdown-Auswahl, platzsparend bei vielen Optionen.\n\n### Matrix\nTabelle mit Zeilen (z.B. Berufsgruppen) und Spalten (z.B. Beteiligt/Nicht beteiligt). Pro Zeile wird eine Spalte gewählt (Radio-Buttons).\n\n### Datei-Upload\nErlaubt das Hochladen von PDF, JPG, PNG (max. 5 MB Standard). Dateien werden als WordPress-Anhänge gespeichert und nach konfigurierbarer Zeit automatisch gelöscht.\n\n## Skip-Logic\n\nSkip-Logic ermöglicht bedingte Verzweigungen:\n\n1. Bei einer Frage \"Skip-Regel\" hinzufügen\n2. Bedingung definieren: \"Wenn Antwort = [Wert]\"\n3. Ziel wählen: \"→ Springe zu Frage [X]\"\n\n**Beispiel:** Bei der ECLS-Umfrage springt Frage 4 (\"Führen Sie ein ECLS-Programm durch?\") bei Antwort \"Nein\" direkt zu Frage 15 (Kommentare), da die Detailfragen dazwischen nicht relevant sind.\n\nAlle übersprungenen Fragen werden ausgeblendet und bei Pflichtfeldprüfung ignoriert.\n\n## Öffentlicher Ergebnis-Link\n\nJede Umfrage hat einen eindeutigen Ergebnis-Token. Der Link hat das Format:\n\n```\nhttps://perfusiologie.de/umfrage-ergebnisse/{token}\n```\n\n**Wichtig:** Nach dem Aktivieren des Moduls einmal unter Einstellungen → Permalinks → Speichern klicken, damit die Rewrite-Rule aktiv wird.\n\nDer öffentliche Link zeigt:\n- Aggregierte Ergebnisse (Diagramme, Statistiken)\n- Keine Freitext-Antworten (Datenschutz)\n- Keine Einzelantworten oder personenbezogene Daten\n\nDen Link finden Sie in der Umfrage-Liste (Share-Icon) oder in den Umfrage-Einstellungen.\n\n## Duplikatschutz\n\n**Cookie + IP (Standard):**\nBeim ersten Besuch wird ein Cookie gesetzt. Bei erneutem Aufruf prüft das System Cookie UND IP-Adresse. Wurde bereits eine abgeschlossene Antwort gefunden, wird statt des Formulars eine Danke-Meldung angezeigt.\n\n**Nur Cookie / Nur IP / Kein Schutz:**\nAlternative Modi, konfigurierbar pro Umfrage.\n\n## Zwischenspeichern\n\nWenn aktiviert, können Teilnehmer ihren Fortschritt speichern und später fortsetzen:\n- Button \"Zwischenspeichern\" im Formular\n- Antworten werden im Cookie zugeordnet\n- Beim nächsten Aufruf werden gespeicherte Antworten vorausgefüllt\n\n## ECLS-Zentren Umfrage\n\nVorkonfigurierte Musterumfrage mit 15 Fragen zur ECLS-Versorgung:\n\n1. Klinik-Name (Text, Pflicht)\n2. Ansprechpartner (Text, Pflicht)\n3. E-Mail (Text, E-Mail-Validierung, Pflicht)\n4. ECLS-Programm vorhanden? (Radio: Ja/Nein, Skip: Nein→15)\n5. Seit wann? (Select)\n6. Welche Systeme? (Checkbox)\n7. Fallzahl pro Jahr (Zahl)\n8. Teamzusammensetzung (Matrix)\n9. 24/7-Bereitschaft? (Radio)\n10. Implantation außerhalb OP? (Checkbox)\n11. Standardisiertes Training? (Radio)\n12. Entwöhnungsprotokoll? (Radio)\n13. Registerteilnahme? (Checkbox)\n14. Interesse DGPTM-Netzwerk? (Radio)\n15. Anmerkungen (Textarea)\n\n**Anlegen:** Im Admin unter Umfragen → Button \"ECLS-Zentren anlegen\". Die Umfrage wird als Entwurf erstellt und muss manuell auf \"Aktiv\" gesetzt werden.\n\n## Einstellungen\n\n**DGPTM Suite → Modul-Einstellungen → Umfragen:**\n\n- Standard-Duplikatschutz (Cookie+IP)\n- Maximale Dateigröße für Uploads (Standard: 5 MB)\n- Datei-Löschfrist (Standard: 90 Tage)\n- Ergebnis-Seite ID (Standard: 0 = Rewrite-Rule)\n\n## Verwendung Schritt für Schritt\n\n### Neue Umfrage erstellen\n\n1. DGPTM Suite → Umfragen → Neue Umfrage\n2. Titel, Beschreibung und Einstellungen eintragen\n3. \"Umfrage speichern\" klicken\n4. Fragen hinzufügen (Typ wählen, Text eingeben, Optionen definieren)\n5. \"Alle Fragen speichern\" klicken\n6. Status auf \"Aktiv\" setzen\n7. Shortcode `[dgptm_umfrage slug=\"...\"]` auf gewünschter Seite einbinden\n\n### Ergebnisse auswerten\n\n1. Umfrage-Liste → Ergebnis-Icon klicken\n2. Übersicht mit Statistiken und Diagrammen prüfen\n3. Einzelantworten bei Bedarf einsehen\n4. CSV-Export für weitere Analyse herunterladen\n5. Öffentlichen Link an Interessierte weitergeben\n\n## Technische Details\n\n- 4 Datenbanktabellen: `dgptm_surveys`, `dgptm_survey_questions`, `dgptm_survey_responses`, `dgptm_survey_answers`\n- Tabellen werden beim Modul-Laden automatisch erstellt (dbDelta)\n- AJAX-basiert: Admin-Speicherung und Frontend-Abgabe\n- Täglicher Cron-Job für Datei-Cleanup\n- Cookie-Laufzeit: 1 Jahr\n- CSV-Export: UTF-8 BOM, Semikolon-Trennung\n\n## Tipps\n\n- Umfrage zuerst als Entwurf erstellen und testen, bevor sie aktiv geschaltet wird\n- Abschnitts-Labels nutzen, um längere Umfragen übersichtlich zu strukturieren\n- Skip-Logic spart Teilnehmern Zeit bei irrelevanten Fragen\n- Nach Modulaktivierung Permalinks neu speichern (für öffentlichen Ergebnis-Link)\n- CSV-Export nutzt Semikolon → in Excel über \"Daten → Aus Text\" importieren oder Gebietsschema auf Deutsch stellen\n- Matrix-Fragen eignen sich für Teamzusammensetzungen oder Bewertungsraster\n- Duplikatschutz kann pro Umfrage individuell eingestellt werden",
    "features": [
        "8 Fragetypen (Text, Textarea, Zahl, Radio, Checkbox, Select, Matrix, Datei)",
        "Skip-Logic (bedingte Verzweigung)",
        "Duplikatschutz (Cookie + IP)",
        "Fortschrittsbalken mit Abschnitts-Navigation",
        "Zwischenspeichern und Fortsetzen",
        "Ergebnis-Dashboard mit Diagrammen",
        "CSV-Export",
        "Öffentlicher Ergebnis-Link",
        "Drag & Drop Fragen-Builder",
        "ECLS-Zentren Musterumfrage",
        "Datei-Upload mit automatischem Cleanup"
    ],
    "keywords": [
        "umfrage",
        "survey",
        "fragebogen",
        "ecls",
        "ecmo",
        "formular",
        "abstimmung",
        "erhebung",
        "befragung",
        "skip-logic",
        "matrix",
        "csv-export",
        "ergebnisse"
    ],
    "module_id": "umfragen",
    "last_updated": "2026-02-10 23:00:00"
}
